#!/bin/bash
echo 'Start git pre-commit hooks and checks... ';
sudo pre-commit run -a;
echo 'End git pre-commit hooks and checks... ';

echo 'Start terraform docs';
for i in `ls -d modules/*/`;do
    if ! git diff --cached --quiet '${i}'
    then
      echo 'Generating  doc file: ${i}';
      terraform-docs markdown table --output-file README.md --output-mode inject '${i}';
    fi
done
echo 'End terraform docs';
